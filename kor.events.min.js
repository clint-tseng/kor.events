var l=true;
(function(){function r(a){var b,c=g.key||"_kor_events_key";if(d(a.jquery)){if(d(b=a[c]))b=a[c]=s++}else if(d(b=a.data(c)))a.data(c,b=s++);return b}function n(){var a=0,b=false;if(arguments[0]===l){a++;b=l}for(var c=arguments[a++];a<arguments.length;a++){var e=arguments[a];if(d(c[e]))if(b)c[e]={};else return;c=c[e]}return c}function t(a){if(a==null)return 0;var b=0,c;for(c in a)b++;return b}function o(a,b){var c=b||[];if(a!=null)for(var e in a)c.push(a[e]);return c}function d(a){return a===void 0}
var u={},p={},s=0,g={};g.listen=function(a){var b=a.subject,c=a.verb,e=a.args,f=s++;a={s:b,v:c,p:a.priority,a:e,i:f,c:a.callback};b=d(b)?u:n(l,p,r(b));var h=b[c];if(d(h))h=b[c]={all:{},arg:{}};if(!d(e))for(var i in e)n(l,h,"arg",i)[f]=a;h.all[f]=a;return f};var A=g.fire=function(a){if(d(a))throw Error("need to provide options to fire on!");var b=a.subject,c=a.verb,e=a.args;if(c==null)throw Error("need to provide a verb at minimum!");var f={},h=n(u,c)||{all:{},arg:{}},i=o(h.all);if(!d(b)){var m=r(b);
m=n(p,m,c);d(m)||o(m.all,i)}if(i.length===0)return l;if(!d(e))for(var q in e){c=e[q];var v=o(h.arg[q]);d(b)||o(m.arg[q],v);for(var j=0;j<v.length;j++){var k=v[j];if(c===k.a[q])f[k.i]=(f[k.i]||0)+1}}i.sort(function(w,x){var y=(x.p||t(x.a))-(w.p||t(w.a));if(y!==0)return y;return w.i-x.i});for(j=0;j<i.length;j++){k=i[j];if(!((f[k.i]||0)<t(k.a)))if(k.c(a)===false)return false}return l};g.derez=function(a){var b=A({subject:a,verb:"derez"});delete p[r(a)];return b};g.clearAll=function(){u={};p={}};if(typeof module!==
"undefined"&&module.exports)module.exports=g;else{var z=this.kor;if(d(z))this.kor={};z.events=g}})();
