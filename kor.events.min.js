var k=true;
(function(){function r(a){var b;e(b=a._kor_events_key)&&(b=a._kor_events_key=x++);return b}function n(){var a=0,b=false;if(arguments[0]===k){a++;b=k}for(var c=arguments[a++];a<arguments.length;a++){var d=arguments[a];if(e(c[d]))if(b)c[d]={};else return;c=c[d]}return c}function s(a){if(a==null)return 0;var b=0,c;for(c in a)b++;return b}function o(a,b){var c=b||[];if(a!=null)for(var d in a)c.push(a[d]);return c}function e(a){return a===void 0}var t={},p={},x=0,l={};l.listen=function(a){var b=a.subject,
c=a.verb,d=a.args,f=x++;a={s:b,v:c,p:a.priority,a:d,i:f,c:a.callback};b=e(b)?t:n(k,p,r(b));var g=b[c];if(e(g))g=b[c]={all:{},arg:{}};if(!e(d))for(var h in d)n(k,g,"arg",h)[f]=a;g.all[f]=a;return f};var A=l.fire=function(a){if(e(a))throw Error("need to provide options to fire on!");var b=a.subject,c=a.verb,d=a.args;if(c==null)throw Error("need to provide a verb at minimum!");var f={},g=n(t,c)||{all:{},arg:{}},h=o(g.all);if(!e(b)){var m=r(b);m=n(p,m,c);e(m)||o(m.all,h)}if(h.length===0)return k;if(!e(d))for(var q in d){c=
d[q];var u=o(g.arg[q]);e(b)||o(m.arg[q],u);for(var i=0;i<u.length;i++){var j=u[i];if(c===j.a[q])f[j.i]=(f[j.i]||0)+1}}h.sort(function(v,w){var y=(w.p||s(w.a))-(v.p||s(v.a));if(y!==0)return y;return v.i-w.i});for(i=0;i<h.length;i++){j=h[i];if(!((f[j.i]||0)<s(j.a)))if(j.c(a)===false)return false}return k};l.derez=function(a){var b=A({subject:a,verb:"derez"});delete p[r(a)];return b};l.clearAll=function(){t={};p={}};if(typeof module!=="undefined"&&module.exports)module.exports=l;else{var z=this.kor;
if(e(z))this.kor={};z.events=l}})();
